<div class="row">

    <div class="col-xs-12">
        <div class="panel">
            <div class="panel-heading">
                <div class="panel-title">
                    <h5>Import complex from excel</h5>
                </div>
            </div>
            <div class="panel-body">

                <div class="form-group">
                    <div class="col-xs-12 col-md-4">
                        <input type="file" class="form-control" name="file-upload" id="file-upload" accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
                               onchange="angular.element(this).scope().uploadComplexList(this.files)" />
                    </div>
                </div>

                <div class="clearfix"></div>

                <div class="table-responsive" ng-if="uploadedSocietyList.length > 0">
                    <table class="table table-striped table-bordered">
                        <!--<caption>Lista de usuarios.</caption>-->
                        <thead class="bg-primary">
                            <tr>
                                <th class="text-center">Sr.No</th>
                                <th class="text-center">Complex Type</th>
                                <th class="text-center">Society Name</th>
                                <th class="text-center">Contact Person</th>
                                <th class="text-center">Mobile No</th>
                                <th class="text-center">Email</th>
                                <th class="text-center">Registration No</th>
                                <th class="text-center">Complex Name</th>
                                <th class="text-center">Address</th>
                                <th class="text-center">Pincode</th>
                                <th class="text-center">Area</th>
                                <th class="text-center">City</th>
                                <th class="text-center">State</th>
                                <th class="text-center">Date Of Incorporation</th>
                                <th class="text-center">Date Of Registration</th>
                                <th class="text-center">No Of Societies</th>
                                <th class="text-center">No Of Building</th>
                                <th class="text-center">No Of Wings</th>
                                <th class="text-center">No Of Amenities</th>
                                <th class="text-center">No Of Gates</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in uploadedSocietyList">
                                <td ng-click="onSelectClick(item,$index)">
                                    {{ item.id }}
                                    <input type="checkbox" ng-model="item.selected" />
                                </td>
                                <td>{{ item.type }}</td>
                                <td>{{ item.societyName }}</td>
                                <td>{{ item.contactPerson }}</td>
                                <td>{{ item.phoneNo }}</td>
                                <td>{{ item.email }}</td>
                                <td>{{ item.registrationNo }}</td>
                                <td>{{ item.name }}</td>
                                <td>{{ item.address }}</td>
                                <td>{{ item.pincode }}</td>
                                <td>{{ item.area }}</td>
                                <td>{{ item.city }}</td>
                                <td>{{ item.state }}</td>
                                <td>{{ item.dateOfIncorporation  | date:"MM/dd/yyyy"}}</td>
                                <td>{{ item.dateOfRegistration  | date:"MM/dd/yyyy"}}</td>
                                <td>{{ item.noOfSocieties }}</td>
                                <td>{{ item.noOfBuilding }}</td>
                                <td>{{ item.noOfWings }}</td>
                                <td>{{ item.noOfAmenities }}</td>
                                <td>{{ item.noOfGate }}</td>
                                <!--<td class="text-center">
                                    <span ng-if="item.isSuccess" style="color:green;">{{ item.result || 'Not Registered' }}</span>
                                    <span ng-if="!item.isSuccess" style="color:red;">{{ item.result || 'Not Registered' }}</span>
                                </td>-->
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!--<div class="form-group col-xs-12 col-md-6 text-left" ng-if="uploadedSocietyList.length > 0">
                    <button type="button" class="btn btn-success" ng-disabled="uploadedSocietyList.length == 0" ng-click="uploadExcel()">Import</button>
                </div>-->

            </div>
        </div>
    </div>

    <div class="col-xs-12">
        <div class="panel">
            <div class="panel-heading">
                <div class="panel-title">
                    <h5>Register a new complex</h5>
                </div>
            </div>
            <div class="panel-body">
                <form class="form-horizontal" name="userForm" ng-submit="submit()">
                    <div class="form-group">
                        <label for="complex" class="col-xs-6 col-md-2 control-label">Complex Type<span class="color-red">*</span></label>
                        <div class="col-xs-12 col-md-4">
                            <select class="form-control" id="complex" ng-model="formData.type" ng-options="ug.text for ug in complexType"
                                    ng-change="onTypeChange()" required>
                                <option value="">Select Option</option>
                            </select>
                        </div>

                        <label for="societyName" class="col-xs-6 col-md-2 control-label" ng-if="formData.type.id == 1">Society Name<span class="color-red">*</span></label>
                        <div class="col-xs-12 col-md-4" ng-if="formData.type.id == 1">
                            <input type="text" class="form-control" id="societyName" title="Society name for complex with single society" ng-change="onTypeChange()"
                                   placeholder="Society name for complex with single society" ng-model="formData.societyName" required>

                        </div>
                    </div>

                    <div class="form-group">
                        <label for="contactPerson" class="col-xs-6 col-md-2 control-label">Contact Person<span class="color-red">*</span></label>
                        <div class="col-xs-12 col-md-4">
                            <input type="text" class="form-control" id="contactPerson" title="Contact Person"
                                   placeholder="Contact Person" ng-model="formData.contactPerson" required>
                        </div>

                        <label for="phoneNo" class="col-xs-6 col-md-2 control-label">Mobile No<span class="color-red">*</span></label>
                        <div class="col-xs-12 col-md-4">
                            <input type="text" class="form-control" id="phoneNo" title="Mobile Number"
                                   placeholder="Mobile Number" ng-model="formData.phoneNo" required maxlength="10" number-field>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="email" class="col-xs-2 col-md-2 control-label">Email<span class="color-red">*</span></label>
                        <div class="col-xs-12 col-md-4">
                            <input type="email" class="form-control" id="email" title="Email"
                                   placeholder="Email" ng-model="formData.email" required>
                        </div>

                        <label for="registrationNo" class="col-xs-6 col-md-2 control-label">Registration No<span class="color-red">*</span></label>
                        <div class="col-xs-12 col-md-4">
                            <input type="text" class="form-control" id="registrationNo" title="Registration No"
                                   placeholder="Registration No" ng-model="formData.registrationNo" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="name" class="col-xs-6 col-md-2 control-label">Complex Name<span class="color-red">*</span></label>
                        <div class="col-xs-12 col-md-4">
                            <input type="text" class="form-control" id="name" title="Legal Name as per registration"
                                   placeholder="Legal Name as per registration" ng-model="formData.name" ng-disabled="formData.type.id == 1" required>
                        </div>

                        <label for="address" class="col-xs-2 col-md-2 control-label">Address<span class="color-red">*</span></label>
                        <div class="col-xs-12 col-md-4">
                            <textarea class="form-control" id="address" title="Address"
                                      placeholder="Address" ng-model="formData.address" required></textarea>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="pincode" class="col-xs-2 col-md-2 control-label">Pincode<span class="color-red">*</span></label>
                        <div class="col-xs-12 col-md-4">
                            <input type="text" class="form-control" id="pincode" title="Pincode"
                                   placeholder="Pincode" ng-model="formData.pincode" required maxlength="6" number-field ng-change="searchArea()">
                        </div>

                        <label for="area" class="col-xs-2 col-md-2 control-label">Area<span class="color-red">*</span></label>
                        <div class="col-xs-12 col-md-4" ng-if="areaData">
                            <input type="text" class="form-control" id="area" title="Area"
                                   placeholder="Area" ng-model="formData.area" required>
                        </div>
                        <div class="col-xs-12 col-md-4" ng-if="areaList.length > 0">
                            <select class="form-control" id="state" ng-model="formData.areaName" ng-options="ug.officeName for ug in areaList" ng-change="onAreaChange()" required>
                                <option value="">Select a area</option>
                            </select>
                            <input type="text" class="form-control" id="area" title="Other Area" placeholder="Other Area" ng-model="formData.area"
                                   ng-if="formData.areaName.officeName == 'Other'" required>
                        </div>

                    </div>

                    <div class="form-group">
                        <label for="city" class="col-xs-6 col-md-2 col-md-2 control-label">City<span class="color-red">*</span></label>
                        <div class="col-xs-12 col-md-4">
                            <select class="form-control" id="city" ng-model="formData.city" ng-options="ug.text for ug in cityList" disabled required>
                                <option value="">Select a city</option>
                            </select>
                        </div>

                        <label for="state" class="col-xs-6 col-md-2 col-md-2 control-label">State<span class="color-red">*</span></label>
                        <div class="col-xs-12 col-md-4">
                            <select class="form-control" id="state" ng-model="formData.state" ng-options="ug.text for ug in stateList" disabled required>
                                <option value="">Select a state</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="dateOfIncorporation" class="col-xs-6 col-md-2 control-label">Date Of Incorporation<span class="color-red">*</span></label>
                        <div class="col-xs-12 col-md-4">
                            <input type="date" max="{{ todayDate | date:'yyyy-MM-dd' }}" data-date-format="dd/MM/yyyy" class="form-control" id="dateOfIncorporation" title="Date Of Incorporation"
                                   placeholder="Date Of Incorporation" ng-model="formData.dateOfIncorporation" required>
                        </div>

                        <label for="dateOfRegistration" class="col-xs-6 col-md-2 control-label">Date Of Registration<span class="color-red">*</span></label>
                        <div class="col-xs-12 col-md-4">
                            <input type="date" min="{{ formData.dateOfIncorporation | date:'yyyy-MM-dd' }}" max="{{ todayDate | date:'yyyy-MM-dd' }}" data-date-format="dd/MM/yyyy" class="form-control" id="dateOfRegistration" title="Date of Possession/Registration"
                                   placeholder="Date of Possession/Registration" ng-model="formData.dateOfRegistration" required>
                        </div>
                    </div>


                    <div class="form-group">

                        <label for="withLift" class="col-xs-6 col-md-2 control-label">No Of Societies<span class="color-red">*</span></label>
                        <div class="col-xs-6 col-md-2">
                            <!--{{ formData.type.id == 1}}-->
                            <div class="input-group" style="z-index: 3;">
                                <input type="number" id="noOfSociety" title="No Of Societies" class="form-control noscroll"
                                       ng-change="onSocietyChanged()" ng-disabled="formData.type.id == 1" min="1"
                                       placeholder="No. of Societies" ng-model="formData.noOfSocieties">

                                <span class="input-group-addon" ng-if="formData.noOfSocieties > 0 || formData.type.id == 1">
                                    <i class="fa fa-building" title="Add Socities" data-toggle="modal" data-target="#newSocieties"></i>
                                </span>
                            </div>
                        </div>


                        <label for="noOfBuilding" class="col-xs-6 col-md-2 control-label">No Of Building<span class="color-red">*</span></label>
                        <div class="col-xs-6 col-md-2">

                            <div class="input-group" style="z-index: 3;">
                                <input type="number" id="noOfBuilding" title="No. of Building" class="form-control noscroll" min="1"
                                       placeholder="No. of Building" ng-model="formData.noOfBuilding" ng-change="onBuildingChanged()" required>


                                <span class="input-group-addon" ng-if="formData.noOfBuilding > 0">
                                    <i class="fa fa-building" title="Add Building Names" data-toggle="modal" data-target="#newBuildings"></i>
                                </span>
                            </div>
                        </div>

                        <label for="noOfWings" class="col-xs-6 col-md-2 control-label">No Of Wings<span class="color-red">*</span></label>
                        <div class="col-xs-6 col-md-2">

                            <div class="input-group" style="z-index: 3;">
                                <input type="number" id="noOfWings" title="No. of Wings" class="form-control noscroll" min="1"
                                       placeholder="No. of Wings" ng-model="formData.noOfWings" ng-change="onWingChanged()" required>


                                <span class="input-group-addon" ng-if="formData.noOfWings > 0">
                                    <i class="fa fa-building" title="Add Wings Names" data-toggle="modal" data-target="#newWings"></i>
                                </span>
                            </div>
                        </div>

                    </div>

                    <div class="form-group">

                        <label for="noOfAmenities" class="col-xs-6 col-md-2 control-label">No Of Amenities<span class="color-red">*</span></label>
                        <div class="col-xs-6 col-md-2">
                            <input type="number" id="noOfAmenities" title="No. of Amenities" class="form-control noscroll" min="0"
                                   placeholder="No. of Amenities" ng-model="formData.noOfAmenities" required>
                        </div>

                        <label for="noOfGate" class="col-xs-6 col-md-2 control-label">No Of Gates<span class="color-red">*</span></label>
                        <div class="col-xs-6 col-md-2">
                            <!--{{ formData.type.id == 1}}-->
                            <div class="input-group" style="z-index: 3;">
                                <input type="number" id="noOfGate" title="No. of gates" class="form-control noscroll"
                                       ng-change="onGateChanged()" min="1"
                                       placeholder="No. of gates" ng-model="formData.noOfGate">

                                <span class="input-group-addon" ng-if="formData.noOfGate > 0">
                                    <i class="fa fa-building" title="Add Socities" data-toggle="modal" data-target="#newGateInfo"></i>
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="row" ng-if="formData.noOfAmenities > 0">

                        <h5 style=" margin-left: 20px;">Select  Amenities/Buildings</h5>

                        <div class="col-lg-2 col-md-2 col-sm-2 col-xs-12 margin-bottom" ng-repeat="facility in FacilityTypes | filter : { text : '!Building' } : true">
                            <div class="amenities-box solid-black-1 max-height">

                                <span class="name text-center">{{ facility.text }}</span>
                                <!--<input type="checkbox" ng-model="facility.selected" />-->
                                <div class="input-group" style="z-index: 3;">
                                    <span class="input-group-addon">
                                        <input type="checkbox" ng-model="facility.selected" ng-change="onAmenitiesChanged(facility)">
                                    </span>
                                    <input type="number" class="form-control noscroll" ng-model="facility.count" ng-disabled="!facility.selected"
                                           ng-change="onAmenitiesCountChanged(facility)" min="1">
                                    <span class="input-group-addon">
                                        <i class="fa fa-plus" ng-disabled="!facility.selected" ng-click="onSelectFacility(facility)"
                                           data-toggle="modal" data-target="#newAmenities"></i>
                                    </span>
                                </div>
                                <!-- /input-group -->
                                <span class="bg-icon"><i ng-class="facility.imageclass"></i></span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group col-xs-12 col-md-6 text-center">
                        <button type="button" class="btn btn-default" ng-click="onBackClick()">Back</button>
                        <button type="submit" class="btn btn-primary" ng-disabled="formSubmitted">Register</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- /.col-md-12 -->
</div>
<!-- /.row -->


<div class="modal fade" id="newAmenities" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">{{ selectedFacility.text }} Name(s)<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></h4>
            </div>
            <div class="modal-body">

                <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                        <thead class="bg-primary">
                            <tr>
                                <th class="text-center">#</th>
                                <th class="text-center">Name</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in selectedFacility.List">
                                <th class="text-center" scope="row">{{ item.srno }}</th>
                                <td>
                                    <input type="text" class="form-control" ng-model="item.name" />
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="clearfix"></div>
            </div>
            <div class="modal-footer">
                <button id="cancelNewAmenities" type="button" class="btn btn-default" data-dismiss="modal">Ok</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="newBuildings" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">Building Name(s)<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></h4>
            </div>
            <div class="modal-body">

                <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                        <thead class="bg-primary">
                            <tr>
                                <th class="text-center">#</th>
                                <th class="text-center">Name</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in buildingList">
                                <td class="text-center" scope="row">{{ item.srno }}</td>
                                <td><input type="text" class="form-control" ng-model="item.name" /></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="clearfix"></div>
            </div>
            <div class="modal-footer">
                <button id="cancelNewAmenities" type="button" class="btn btn-default" data-dismiss="modal">Ok</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="newWings" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document" style="width: 1020px;">
        <div class="modal-content" style="width: 1020px;">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">Wings Name(s)<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></h4>
            </div>
            <div class="modal-body">

                <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                        <thead class="bg-primary">
                            <tr>
                                <th class="text-center">#</th>
                                <th class="text-center" ng-if="formData.type.id == 2">Select Society</th>
                                <th class="text-center">Select Building</th>
                                <th class="text-center">Wing</th>
                                <th class="text-center">#Lifts</th>
                                <th class="text-center">#Floors</th>
                                <th class="text-center">#Flats</th>
                                <!--<th class="text-center">#Allocated Parkings</th>-->
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in wingList">
                                <td class="text-center" scope="row">{{ item.srno }}</td>
                                <td ng-if="formData.type.id == 2">
                                    <select style="width:200px;" class="form-control" ng-model="item.society" ng-options="ug.name for ug in societyList"></select>
                                </td>
                                <td>
                                    <select style="width:200px;" class="form-control" ng-model="item.building" ng-options="ug.name for ug in buildingList"></select>
                                </td>
                                <td><input type="text" style="width:200px;" class="form-control" ng-model="item.wing" /></td>
                                <td><input type="number" min="1" style="width:75px;" class="form-control noscroll" ng-model="item.noOfLifts" /></td>
                                <td><input type="number" min="1" style="width:75px;" class="form-control noscroll" ng-model="item.noOfFloors" /></td>
                                <td><input type="number" min="1" style="width:75px;" class="form-control noscroll" ng-model="item.noOfFlats" /></td>
                                <!--<td><input type="number" style="width:50px;" class="form-control" ng-model="item.noOfParkinglots" /></td>-->
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="clearfix"></div>
            </div>
            <div class="modal-footer">
                <button id="cancelNewAmenities" type="button" class="btn btn-default" data-dismiss="modal">Ok</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="newSocieties" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">Society Name(s)<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></h4>
            </div>
            <div class="modal-body">

                <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                        <thead class="bg-primary">
                            <tr>
                                <th class="text-center">#</th>
                                <th class="text-center">Name</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in societyList">
                                <th class="text-center" scope="row">{{ item.srno }}</th>
                                <td>
                                    <input type="text" class="form-control" ng-model="item.name" ng-disabled="formData.type.id == 1" />
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="clearfix"></div>
            </div>
            <div class="modal-footer">
                <button id="cancelNewAmenities" type="button" class="btn btn-default" data-dismiss="modal">Ok</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="newGateInfo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">Gate<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></h4>
            </div>
            <div class="modal-body">

                <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                        <thead class="bg-primary">
                            <tr>
                                <th class="text-center">#</th>
                                <th class="text-center">Name</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in gateList">
                                <th class="text-center" scope="row">{{ item.srno }}</th>
                                <td><input type="text" class="form-control" ng-model="item.name" /></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="clearfix"></div>
            </div>
            <div class="modal-footer">
                <button id="cancelNewAmenities" type="button" class="btn btn-default" data-dismiss="modal">Ok</button>
            </div>
        </div>
    </div>
</div>

